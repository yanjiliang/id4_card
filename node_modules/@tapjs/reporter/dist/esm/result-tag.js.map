{"version":3,"file":"result-tag.js","sourceRoot":"","sources":["../../src/result-tag.tsx"],"names":[],"mappings":"AACA,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,KAAK,CAAA;AAC/B,OAAO,KAAa,MAAM,OAAO,CAAA;AAEjC,OAAO,EAAE,UAAU,EAAE,MAAM,kBAAkB,CAAA;AAC7C,OAAO,EAAE,aAAa,EAAE,MAAM,qBAAqB,CAAA;AAQnD,MAAM,CAAC,MAAM,SAAS,GAAmB,CAAC,EACxC,MAAM,EACN,OAAO,GAAG,KAAK,EACf,IAAI,GACL,EAAE,EAAE;IACH,MAAM,YAAY,GAAG,CAAC,OAAO,CAAA;IAC7B,MAAM,CAAC,GACL,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI;QAClB,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI;YACpB,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG;gBAClB,CAAC,CAAC,IAAI,CAAA;IACR,MAAM,KAAK,GACT,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM;QACpB,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS;YACzB,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK;gBACpB,CAAC,CAAC,OAAO,CAAA;IACX,MAAM,IAAI,GAAG,CACX,oBAAC,IAAI,IAAC,IAAI,QAAC,KAAK,EAAE,KAAK,IACpB,CAAC,CACG,CACR,CAAA;IACD,IAAI,EAAE,GAAG,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,IAAI,MAAM,CAAC,QAAQ,CAAA;IACtD,MAAM,IAAI,GACR,OAAO,EAAE,KAAK,QAAQ,CAAC,CAAC,CAAC,oBAAC,IAAI,IAAC,KAAK,EAAE,KAAK;;QAAI,EAAE,CAAQ,CAAC,CAAC,CAAC,yCAAK,CAAA;IACnE,MAAM,EAAE,GAAG,MAAM,CAAC,IAAI,EAAE,EAAE,CAAA;IAC1B,MAAM,QAAQ,GAAG,EAAE,EAAE,QAAQ,CAAA;IAC7B,MAAM,QAAQ,GACZ,YAAY,IAAI,EAAE,IAAI,QAAQ,CAAC,CAAC;QAC9B,oBAAC,IAAI,IAAC,QAAQ;YACX,QAAQ;YACR,EAAE,CAAC,UAAU,IAAI,EAAE,CAAC,YAAY,CAAC,CAAC;gBACjC,IAAI,EAAE,CAAC,UAAU,IAAI,EAAE,CAAC,YAAY,EAAE;gBACxC,CAAC,CAAC,EAAE,CACC;QACT,CAAC,CAAC,yCAAK,CAAA;IACT,MAAM,IAAI,GAAG,UAAU,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,IAAI,EAAE,CAAA;IAE5C,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,EAAE,IAAI,CAAC,OAAO,CAAA;IAE3C,OAAO,CACL,oBAAC,GAAG,IAAC,aAAa,EAAC,QAAQ,EAAC,GAAG,EAAE,CAAC;QAChC,oBAAC,GAAG;YACF,oBAAC,GAAG;gBACD,IAAI;gBACL,oBAAC,IAAI,QAAE,IAAI,CAAQ,CACf;YACL,IAAI;YACJ,MAAM,CAAC,CAAC;gBACP;oBACE,oBAAC,IAAI,YAAS;oBACb,QAAQ,CACR;gBACL,CAAC,CAAC,yCAAK,CACH;QACL,MAAM,CAAC,CAAC;YACP,yCAAK;YACP,CAAC,CAAC,oBAAC,GAAG,IAAC,WAAW,EAAE,CAAC,IAAG,QAAQ,CAAO;QACtC,CAAC,CAAC,OAAO,IAAI,oBAAC,aAAa,IAAC,MAAM,EAAE,MAAM,GAAI,CAC3C,CACP,CAAA;AACH,CAAC,CAAA","sourcesContent":["import { Base } from '@tapjs/core'\nimport { Box, Text } from 'ink'\nimport React, { FC } from 'react'\nimport { Result } from 'tap-parser'\nimport { assertName } from './assert-name.js'\nimport { ResultDetails } from './result-details.js'\n\nexport interface ResultOpts {\n  result: Result\n  details?: boolean\n  test: Base\n}\n\nexport const ResultTag: FC<ResultOpts> = ({\n  result,\n  details = false,\n  test,\n}) => {\n  const showCallsite = !details\n  const c =\n    result.skip ? '~ '\n    : result.todo ? '☐ '\n    : !result.ok ? '✖'\n    : '✓ '\n  const textc =\n    result.skip ? 'cyan'\n    : result.todo ? 'magenta'\n    : !result.ok ? 'red'\n    : 'green'\n  const pref = (\n    <Text bold color={textc}>\n      {c}\n    </Text>\n  )\n  let st = result.skip || result.todo || result.tapError\n  const suff =\n    typeof st === 'string' ? <Text color={textc}> {st}</Text> : <></>\n  const at = result.diag?.at\n  const fileName = at?.fileName\n  const callsite =\n    showCallsite && at && fileName ?\n      <Text dimColor>\n        {fileName}\n        {at.lineNumber && at.columnNumber ?\n          `:${at.lineNumber}:${at.columnNumber}`\n        : ''}\n      </Text>\n    : <></>\n  const name = assertName(result, test).trim()\n\n  const inline = name.length < 25 && !details\n\n  return (\n    <Box flexDirection=\"column\" gap={0}>\n      <Box>\n        <Box>\n          {pref}\n          <Text>{name}</Text>\n        </Box>\n        {suff}\n        {inline ?\n          <>\n            <Text> </Text>\n            {callsite}\n          </>\n        : <></>}\n      </Box>\n      {inline ?\n        <></>\n      : <Box paddingLeft={2}>{callsite}</Box>}\n      {!!details && <ResultDetails result={result} />}\n    </Box>\n  )\n}\n"]}